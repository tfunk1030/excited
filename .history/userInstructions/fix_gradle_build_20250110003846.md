# Fixing Gradle Build Issues

This document outlines the steps to resolve the Gradle build issues in the React Native Android project.

## Problem Description
The build is failing with a metadata cache corruption error:
```
Could not read workspace metadata from C:\Users\tfunk\.gradle\caches\8.10.2\transforms\...metadata.bin
```

## Solution Steps

1. **Stop Gradle Daemon**
   - Stops any running Gradle processes to ensure a clean state
   - Prevents locked files and cache issues

2. **Set Java 17 Environment**
   - Ensures the correct Java version is being used
   - React Native Android build requires Java 17
   - Sets both JAVA_HOME and PATH variables

3. **Clean Gradle Caches**
   - Removes potentially corrupted cache directories:
     * Gradle 8.10.2 caches
     * Transform caches
     * Build caches
     * Daemon directories
     * Native directories
     * Worker directories
   - This forces Gradle to rebuild its caches cleanly

4. **Clean Android Build Directories**
   - Removes all generated build files
   - Cleans the .gradle directory
   - Ensures no stale build artifacts remain

5. **Downgrade Gradle Version**
   - Updates Gradle wrapper to version 8.0.0
   - This version is known to work well with React Native
   - Avoids potential issues with newer Gradle versions

6. **Build with Debug Info**
   - Runs the build with --info and --stacktrace flags
   - Uses --no-daemon to prevent daemon-related issues
   - Provides detailed error information if needed

## Usage

1. Open PowerShell in the android directory
2. Run the fix script:
   ```powershell
   ./fix_gradle_issues.ps1
   ```

## Expected Outcome
- Clean Gradle environment
- Resolved cache corruption
- Successful build completion

## Troubleshooting
If issues persist after running the script:
1. Check Java version is correctly set
2. Verify Android SDK installation
3. Check for any locked files in .gradle directory
4. Review build.gradle files for potential conflicts
