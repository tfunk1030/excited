# Fixing Gradle Build Issues

This document outlines the steps to resolve the Gradle build issues in the React Native Android project.

## Problem Description
The build is failing with a metadata cache corruption error:
```
Could not read workspace metadata from C:\Users\tfunk\.gradle\caches\8.10.2\transforms\...metadata.bin
```

## Solution Steps

1. **Stop All Java and Gradle Processes**
   - Stops any running Gradle daemons
   - Forcefully terminates any Java processes
   - Ensures no locked files or processes interfere

2. **Set Java 17 Environment**
   - Ensures the correct Java version is being used
   - React Native Android build requires Java 17
   - Sets both JAVA_HOME and PATH variables
   - Verifies Java version before proceeding

3. **Complete Gradle Reset**
   - Removes entire .gradle directory
   - Recreates essential directory structure
   - Ensures clean state without any cached artifacts
   - Prevents issues with corrupted caches

4. **Clean Android Build Directories**
   - Recursively removes all build directories
   - Removes all .gradle directories in the project
   - Uses PowerShell's Get-ChildItem for thorough cleanup
   - Handles errors gracefully with recovery attempts

5. **Reset Gradle Configuration**
   - Updates Gradle wrapper to version 8.0.0
   - Directly modifies wrapper properties file
   - Sets appropriate network timeouts
   - Validates distribution URLs

6. **Build with Enhanced Options**
   - Uses --no-daemon for clean builds
   - Adds --refresh-dependencies flag
   - Includes --info and --stacktrace for debugging

## Usage

1. Open PowerShell in the android directory
2. Run the fix script:
   ```powershell
   ./fix_gradle_issues.ps1
   ```

## Expected Outcome
- Clean Gradle environment
- Resolved cache corruption
- Successful build completion

## Troubleshooting
If issues persist after running the script:
1. Check Java version is correctly set
2. Verify Android SDK installation
3. Check for any locked files in .gradle directory
4. Review build.gradle files for potential conflicts
