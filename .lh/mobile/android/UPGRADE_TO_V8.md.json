{
    "sourceFile": "mobile/android/UPGRADE_TO_V8.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1736531776756,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1736531776756,
            "name": "Commit-0",
            "content": "# Android Gradle Plugin 8.x Upgrade Guide\r\n\r\n## Overview\r\nThis guide covers the upgrade process from AGP 7.x to 8.x, including all necessary configuration changes and validation steps.\r\n\r\n## Prerequisites\r\n- Java 17 installed\r\n- Latest Android Studio\r\n- Backup of current configuration\r\n- All current builds passing\r\n\r\n## New Build Scripts\r\nTwo new scripts have been provided for the v8 upgrade:\r\n\r\n1. `rebuild_with_cache_clear_v8.ps1`\r\n   - Complete rebuild process for AGP 8.x\r\n   - Includes Java 17 configuration\r\n   - Enhanced validation checks\r\n   - Performance monitoring\r\n\r\n2. `run_after_metro_v8.ps1`\r\n   - Updated build and run process\r\n   - Performance profiling\r\n   - Enhanced error checking\r\n   - Build reports generation\r\n\r\n## Upgrade Process\r\n\r\n### 1. Create Backup\r\n```powershell\r\n# Create backup directory\r\n$timestamp = Get-Date -Format \"yyyyMMdd_HHmmss\"\r\n$backupDir = \"backup_pre_v8_$timestamp\"\r\nNew-Item -ItemType Directory -Path $backupDir/app -Force\r\n\r\n# Backup files\r\nCopy-Item \"build.gradle\" \"$backupDir/\"\r\nCopy-Item \"gradle.properties\" \"$backupDir/\"\r\nCopy-Item \"settings.gradle\" \"$backupDir/\"\r\nCopy-Item \"version.gradle\" \"$backupDir/\"\r\nCopy-Item \"app/build.gradle\" \"$backupDir/app/\"\r\n```\r\n\r\n### 2. Update Configuration Files\r\n\r\n#### android/gradle.properties\r\n```properties\r\n# Add these lines\r\nandroid.suppressUnsupportedCompileSdk=34\r\nandroid.disableAutomaticComponentCreation=true\r\norg.gradle.java.home=C:\\\\Program Files\\\\Java\\\\jdk-17\r\n```\r\n\r\n#### android/build.gradle\r\n```gradle\r\nbuildscript {\r\n    ext {\r\n        androidGradlePluginVersion = \"8.1.0\"\r\n        kotlinVersion = \"1.9.24\"\r\n    }\r\n}\r\n\r\n// Add to allprojects\r\nallprojects {\r\n    tasks.withType(JavaCompile) {\r\n        sourceCompatibility = JavaVersion.VERSION_17\r\n        targetCompatibility = JavaVersion.VERSION_17\r\n    }\r\n}\r\n```\r\n\r\n### 3. Validation Steps\r\n\r\n1. Clean Environment:\r\n```powershell\r\n./rebuild_with_cache_clear_v8.ps1\r\n```\r\n\r\n2. Build and Test:\r\n```powershell\r\n./run_after_metro_v8.ps1\r\n```\r\n\r\n3. Check Build Reports:\r\n- Review reports in `android/build/reports/`\r\n- Verify build performance metrics\r\n- Check for any deprecation warnings\r\n\r\n## Rollback Process\r\n\r\nIf issues are encountered:\r\n\r\n1. Stop all processes:\r\n```powershell\r\nGet-Process -Name node | Stop-Process -Force\r\n./gradlew --stop\r\n```\r\n\r\n2. Restore from backup:\r\n```powershell\r\n# Navigate to backup directory\r\ncd $backupDir\r\n./restore_configs.ps1\r\n```\r\n\r\n3. Return to previous scripts:\r\n```powershell\r\n./rebuild_with_cache_clear.ps1\r\n```\r\n\r\n## Known Issues and Solutions\r\n\r\n### 1. Kotlin Version Conflicts\r\n**Solution:** Add to android/build.gradle:\r\n```gradle\r\nconfigurations.all {\r\n    resolutionStrategy {\r\n        force \"org.jetbrains.kotlin:kotlin-stdlib:$kotlinVersion\"\r\n        force \"org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlinVersion\"\r\n    }\r\n}\r\n```\r\n\r\n### 2. Java Version Mismatch\r\n**Solution:** Verify JAVA_HOME in both PowerShell and Gradle:\r\n```powershell\r\nWrite-Host $env:JAVA_HOME\r\n./gradlew --version\r\n```\r\n\r\n### 3. Metro Connection Issues\r\n**Solution:** Reset Metro and ADB:\r\n```powershell\r\nadb reverse --remove-all\r\nadb reverse tcp:8081 tcp:8081\r\n```\r\n\r\n## Performance Monitoring\r\n\r\nThe new scripts include performance monitoring. Check these locations:\r\n- Build times: `android/build/reports/profile/`\r\n- Memory usage: Android Studio's Memory Profiler\r\n- Build cache: `android/build/reports/build-cache/`\r\n\r\n## Support Files\r\n\r\nAll support files are maintained in their original locations:\r\n- Original scripts: Maintained for rollback\r\n- New v8 scripts: Added for upgrade\r\n- Documentation: Both versions maintained\r\n\r\n## Next Steps\r\n\r\n1. Monitor build performance\r\n2. Review deprecation warnings\r\n3. Update third-party dependencies\r\n4. Clean up obsolete configurations\r\n\r\nFor detailed upgrade documentation, refer to:\r\n- [AGP 8.0 Migration Guide](https://developer.android.com/studio/releases/gradle-plugin-8-0-0)\r\n- [Kotlin 1.9.x Release Notes](https://kotlinlang.org/docs/whatsnew19.html)"
        }
    ]
}